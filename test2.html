<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=CkctSvStokFTVFE4jdi5MYTsatpvfBP4"></script>
</head>
<style>
    #allmap{height:500px;}
</style>
<body>
<button onclick="action()">打开地图</button>
<div id="allmap"></div>
<script>
function action(){
    console.log(11111)
    navigator.geolocation.getCurrentPosition(function(data){
        console.log(data)
        var y=data.coords.latitude;
        var x=data.coords.longitude;
        var map = new BMap.Map("allmap");    // 创建Map实例
        map.centerAndZoom(new BMap.Point(x, y), 110);  // 初始化地图,设置中心点坐标和地图级别
        map.addControl(new BMap.MapTypeControl());   //添加地图类型控件
        map.setCurrentCity("北京");          // 设置地图显示的城市 此项是必须设置的
        map.enableScrollWheelZoom(true);
    },function(){
        console.log("失败")
    })
}
</script>
</body>

</html>